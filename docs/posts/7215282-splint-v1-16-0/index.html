<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Thoughts and bits: Splint v1.16.0</title>
        
<meta name="keywords" content="cohost mirror,splint,clojure,programming,functional programming,devblog">

<meta name="description" content="The --only cli flag is one I&#39;ve been meaning to implement for a while but just hadn&#39;t gotten around to. It&#39;s really only helpful when you&#39;re zeroing in on a problem rule, but there will always be uses.The rule lint/duplicate-case-test is already checked by case&#39;s expansion, but I think it&#39;s good for static analysis tools to verify that stuff too. And lint/locking-object should help uncover subtle bugs, especially in concurrent situations.Honestly, having been fired, I just don&#39;t have the strong drive to work on this like I did. I no longer have a 140k sloc project to test against, so there&#39;s less for me to look at and find inspiration from. I&#39;m trying to keep up with it tho, it&#39;s helpful to not get rusty.">

<meta property="og:description" content="The --only cli flag is one I&#39;ve been meaning to implement for a while but just hadn&#39;t gotten around to. It&#39;s really only helpful when you&#39;re zeroing in on a problem rule, but there will always be uses.The rule lint/duplicate-case-test is already checked by case&#39;s expansion, but I think it&#39;s good for static analysis tools to verify that stuff too. And lint/locking-object should help uncover subtle bugs, especially in concurrent situations.Honestly, having been fired, I just don&#39;t have the strong drive to work on this like I did. I no longer have a 140k sloc project to test against, so there&#39;s less for me to look at and find inspiration from. I&#39;m trying to keep up with it tho, it&#39;s helpful to not get rusty.">

<meta property="og:url" content="https://noahbogart.com/posts/7215282-splint-v1-16-0/" />
<meta property="og:title" content="Splint v1.16.0" />
<meta property="og:type" content="article" />

        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700|Oxygen:300,400,700|Inconsolata" rel="stylesheet">
        <link href="/css/normalize.css" rel="stylesheet" type="text/css" />
        <link href="/css/blog.css" rel="stylesheet" type="text/css" />
        <link href="/css/colors/colorful.css" rel="stylesheet" type="text/css" />
        <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
        <link rel="manifest" href="img/site.webmanifest">
    </head>
    <body>
        <aside id="sidebar">
            <div id="logo">
                <a title="Thoughts and bits" href="/">
                    <img class="icon" src="/img/profile.webp">
                    <div class="text desktop-and-tablet-only">Thoughts and bits</div>
                    <div class="text mobile-only">Thoughts and bits</div>
                </a>
            </div>

            <nav id="sidebar-links">
                <nav id="menucont">
                    <input type="checkbox" id="menu-checkbox" class="menu-checkbox">
                    <label for="menu-checkbox" class="menutitle">
                        <svg class="icon icon-menu" aria-hidden="true"><use xlink:href="/img/icons.svg#icon-menu"></use></svg><span class="menu-text">Menu</span>
                    </label>
                    <ul class="menu">
                        <li >
                            <a title="Home" href="/">
                                <div class="menu-item-text">Home</div>
                            </a>
                        </li>
                        <li >
                            <a title="Posts" href="/p/1/">
                                <div class=" menu-item-text">Posts</div>
                            </a>
                        </li>
                        
                        <li >
                            <a href="/now/">
                                <div class="menu-item-text">Now</div>
                            </a>
                        </li>
                        
                        <li >
                            <a title="Archives" href="/archives/">
                                <div class="menu-item-text">Archives</div>
                            </a>
                        </li>
                        
                        <li >
                            <a title="Tags" href="/tags/">
                                <div class="menu-item-text">Tags</div>
                            </a>
                        </li>
                        
                    </ul>
                </nav>

                <nav id="socialmedia">
                    <ul>
                        <li>
                            <a title="Email"
                               href="mailto:noah.bogart@hey.com"
                               target="_blank"
                               rel="external"
                               >
                               <svg class="icon icon-mail-alt">
                                   <use xlink:href="/img/icons.svg#icon-mail-alt"></use>
                               </svg>
                            </a>
                        </li>
                        <li>
                            <a title="LinkedIn"
                               href="https://www.linkedin.com/in/noah-bogart"
                               target="_blank"
                               rel="external"
                               >
                                <svg class="icon icon-linkedin">
                                    <use xlink:href="/img/icons.svg#icon-linkedin"></use>
                                </svg>
                            </a>
                        </li>
                        <li>
                            <a title="GitHub"
                               href="https://github.com/NoahTheDuke"
                               target="_blank"
                               rel="external"
                               >
                               <svg class="icon icon-github-circled">
                                   <use xlink:href="/img/icons.svg#icon-github-circled"></use>
                               </svg>
                            </a>
                        </li>
                        <li>
                            <a title="RSS Feed"
                               href="/feed.xml"
                               >
                               <svg class="icon icon-rss-squared">
                                   <use xlink:href="/img/icons.svg#icon-rss-squared"></use>
                               </svg>
                            </a>
                        </li>
                    </ul>
                </nav>
            </nav>
        </aside>

        <article id="main">
            
<div id="post">
    <div class="post-header">
    <h1>Splint v1.16.0</h1>
    <div class="byline">
        <span title="Thu, August 8, 2024, 15:42 PM">
            Aug 8, 2024, @862.50
        </span>
        / 
            
            <a href="/tags/cohost%20mirror/">#cohost mirror</a>
            
            <a href="/tags/splint/">#splint</a>
            
            <a href="/tags/clojure/">#clojure</a>
            
            <a href="/tags/programming/">#programming</a>
            
            <a href="/tags/functional%20programming/">#functional programming</a>
            
            <a href="/tags/devblog/">#devblog</a>
            
        
        
        / <a href="https://cohost.org/noahtheduke/post/7215282-splint-v1-16-0">Cohost post</a>
        
    </div>
</div>
<hr>
<div>
    
    <p>The <code>--only</code> cli flag is one I've been meaning to implement for a while but just hadn't gotten around to. It's really only helpful when you're zeroing in on a problem rule, but there will always be uses.</p><p>The rule <code>lint/duplicate-case-test</code> is already checked by <code>case</code>'s expansion, but I think it's good for static analysis tools to verify that stuff too. And <code>lint/locking-object</code> should help uncover subtle bugs, especially in concurrent situations.</p><p>Honestly, having been fired, I just don't have the strong drive to work on this like I did. I no longer have a 140k sloc project to test against, so there's less for me to look at and find inspiration from. I'm trying to keep up with it tho, it's helpful to not get rusty.</p><p>Full changelog under the cut</p><hr /><h3 id="new-rules">New rules</h3><ul><li><code>lint/redundant-call-str</code>: Don't call <code>str</code> on input that's guaranteed to be a string: Prefer <code>"foo"</code> to <code>(str "foo")</code>, <code>(str "foo" bar)</code> to <code>(str (str "foo" bar))</code>, and <code>(format "foo%s" bar)</code> to <code>(str (format "foo%s" bar))</code>. (See <a href="https://github.com/clj-kondo/clj-kondo/issues/2323">clj-kondo#2323</a> for inspiration.)</li><li><code>lint/duplicate-case-test</code>: Don't use the same case test constant more than once.</li><li><code>lint/locking-object</code>: Prefer to lock on a symbol bound to <code>(Object.)</code>.</li></ul><h3 id="added">Added</h3><ul><li><code>--only RULE</code> cli flag to run only specified rules or genres. Can be used multiple times. (<a href="https://github.com/NoahTheDuke/splint/issues/13">#13</a>)</li></ul><h3 id="changed">Changed</h3><ul><li>Switched from <code>clojure.pprint</code> to <a href="https://github.com/brandonbloom/fipp">fipp</a> for pretty-printing code. Fast and easy to extend.</li><li>Use <a href="https://github.com/clj-commons/ordered">org.flatland/ordered</a> (when run in Clojure) to keep parsed maps and sets in their read order.</li><li>Add exceptions to diagnostics and print stack traces in all errors. Should fix bugs where all that's printed is <code>Splint encountered an error: ""</code> which is unhelpful and shameful.</li><li>External links in <code>default.edn</code> are now <code>:links</code>, a vector of strings. This allows for listing multiple references.</li><li>Switch all tests to Lazytest to do some dogfooding.</li><li>Enforce that <code>??</code> only 1 or 2 arguments, and if provided, that the predicate is a symbol.</li><li>Updated all dependencies.</li></ul><h3 id="fixed">Fixed</h3><ul><li>Outputs <code>json</code> and <code>json-pretty</code> now work with Babashka, by relying on Babashka's built-in <code>chehire.core</code> instead of <code>clojure.data.json</code>. This shouldn't result in any observable differences. I'd use <code>cheshire.core</code> for both, but <code>cheshire.core</code> is much bigger and more complicated than <code>clojure.data.json</code>, and it's a pain in the ass imo.</li></ul>
</div>
<hr>
<div>
    Liked the post? Hated the post? Felt nothing whatsoever about the post?

    <a href="mailto:noah.bogart+blogcomment@hey.com?subject=RE: Splint v1.16.0">Email me</a>, and let me know!
</div>

    <br>
    
    <div id="prev-next">
    
    <div class="prev"></div>
    
    
    <div class="next"></div>
    
</div>

    
</div>

            <hr/>
            <div id="footercont">
                Copyright &copy; 2024 Noah Bogart
                <br>Powered by <a href="http://cryogenweb.org">Cryogen</a>
                <br>Theme by <a href="http://github.com/KingMob">KingMob</a>
            </div>
        </article>

        
        
    </body>
</html>
