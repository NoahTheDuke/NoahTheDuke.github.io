<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Thoughts and bits: splint update</title>
        
<meta name="keywords" content="clojure,linting,cohost mirror,devlog">

<meta name="description" content="I’ve named my new clojure linter splint, a portmanteau of spat and lint. Spat is the name of the s-expression pattern matching/regex library I wrote, the name also a portmanteau from s-expression and pattern.Why another linter? Because I am dissatisfied with the current crop of them.">

<meta property="og:description" content="I’ve named my new clojure linter splint, a portmanteau of spat and lint. Spat is the name of the s-expression pattern matching/regex library I wrote, the name also a portmanteau from s-expression and pattern.Why another linter? Because I am dissatisfied with the current crop of them.">

<meta property="og:url" content="https://noahtheduke.github.io/posts/cohost-mirror/2023-02-28-splint-update/" />
<meta property="og:title" content="splint update" />
<meta property="og:type" content="article" />

        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700|Oxygen:300,400,700|Inconsolata" rel="stylesheet">
        <link href="/css/normalize.css" rel="stylesheet" type="text/css" />
        <link href="/css/blog.css" rel="stylesheet" type="text/css" />
        <link href="/css/colors/colorful.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <aside id="sidebar">
            <div id="logo">
                <a title="Thoughts and bits" href="/">
                    <img class="icon" src="/img/profile.webp">
                    <div class="text desktop-and-tablet-only">Thoughts and bits</div>
                    <div class="text mobile-only">Thoughts and bits</div>
                </a>
            </div>

            <nav id="sidebar-links">
                <nav id="menucont">
                    <input type="checkbox" id="menu-checkbox" class="menu-checkbox">
                    <label for="menu-checkbox" class="menutitle">
                        <svg class="icon icon-menu" aria-hidden="true"><use xlink:href="/img/icons.svg#icon-menu"></use></svg><span class="menu-text">Menu</span>
                    </label>
                    <ul class="menu">
                        <li >
                            <a title="Home" href="/">
                                <div class="menu-item-text">Home</div>
                            </a>
                        </li>
                        
                        <li >
                            <a title="Posts" href="/p/1/">
                                <div class=" menu-item-text">Posts</div>
                            </a>
                        </li>
                        <li >
                            <a href="/about/">
                                <div class="menu-item-text">About</div>
                            </a>
                        </li>
                        
                        <li >
                            <a title="Archives" href="/archives/">
                                <div class="menu-item-text">Archives</div>
                            </a>
                        </li>
                        
                        <li >
                            <a title="Tags" href="/tags/">
                                <div class="menu-item-text">Tags</div>
                            </a>
                        </li>
                        
                    </ul>
                </nav>

                <nav id="socialmedia">
                    <ul>
                        <li><a title="LinkedIn" href="https://www.linkedin.com/in/noah-bogart" rel="external"><svg class="icon icon-linkedin"><use xlink:href="/img/icons.svg#icon-linkedin"></use></svg></a></li>
                        <li><a title="GitHub" href="https://github.com/NoahTheDuke" rel="external"><svg class="icon icon-github-circled"><use xlink:href="/img/icons.svg#icon-github-circled"></use></svg></a></li>
                        <li><a title="RSS Feed" href="/feed.xml"><svg class="icon icon-rss-squared"><use xlink:href="/img/icons.svg#icon-rss-squared"></use></svg></a></li>
                    </ul>
                </nav>
            </nav>
        </aside>

        <article id="main">
            
<div id="post">
    <div class="post-header">
    <div id="post-meta">
        <h1>splint update</h1>
        <div class="byline">
            Feb 28, 2023
            <span title="February 28, 2023">@423.61</span>
            / 
                
                <a href="/tags/clojure/">#clojure</a>
                
                <a href="/tags/cohost%20mirror/">#cohost mirror</a>
                
                <a href="/tags/devlog/">#devlog</a>
                
                <a href="/tags/linting/">#linting</a>
                
            
        </div>
    </div>
</div>
<div>
    
    <p>I’ve named my new clojure linter splint, a portmanteau of spat and lint. Spat is the name of the s-expression pattern matching/regex library I wrote, the name also a portmanteau from s-expression and pattern.</p><p>Why another linter? Because I am dissatisfied with the current crop of them.</p><hr /><p>I voiced my issues with clj-kondo last time so I won’t re-litigate them. Kibit is incredibly, unusably slow, taking roughly 45 minutes to lint 60k lines of code. Eastwood is too clever for its own good and not actually extensive enough to be greatly useful.</p><p>My goal is to write something that most anyone can contribute to, that runs “fast enough”, and that covers <em>a lot</em> of ground.</p><p>Like I did nearly three years ago with fixture-riveter, I’m once again taking heavy inspiration from an existing Ruby library/framework. This time, Rubocop. I love how cops are written, I love the documentation, I love the simplicity of the configuration, and I love the massive scale of available lints.</p><p>What does this look like for me and for Splint then? Not much at the moment. I’m still missing some core functionality (such as configuration), I only have ~60 rules, and I can’t actually write certain compelling and interesting rules yet.</p><p>But I do have a powerful and interesting pattern matching library, stand alone rules that are easy to write and easy to read, and a runner that can process those same 60k lines of code in about 10 seconds. That feels pretty good to me so far.</p><p>Hopefully, I can finish up this primary work soon and see how the greater community takes to it.</p><p>Small example of how a rule is defined:</p><code class="clojure highlight" data-lang="clojure"><pre><span></span><span class="p">(</span><span class="nf">defrule</span> <span class="nv">let-if</span>
  <span class="s">"`if-let` exists so use it. Suggestions can be wrong as there's no code-walking to</span>
<span class="s">  determine if `result` binding is used in falsy branch.</span>

<span class="s">Examples:</span>

<span class="s"># bad</span>
<span class="s">  (let [result (some-func)] (if result (do-stuff result) (other-stuff)))</span>

<span class="s"># good</span>
<span class="s">  (if-let [result (some-func)] (do-stuff result) (other-stuff))</span>
<span class="s">  "</span>
  <span class="p">{</span><span class="ss">:pattern</span> <span class="o">'</span><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">?result</span> <span class="nv">?given</span><span class="p">]</span> <span class="p">(</span><span class="k">if </span><span class="nv">?result</span> <span class="nv">?truthy</span> <span class="nv">?falsy</span><span class="p">))</span>
   <span class="ss">:message</span> <span class="s">"Use the built-in function instead of recreating it."</span>
   <span class="ss">:replace</span> <span class="o">'</span><span class="p">(</span><span class="nb">if-let </span><span class="p">[</span><span class="nv">?result</span> <span class="nv">?given</span><span class="p">]</span> <span class="nv">?truthy</span> <span class="nv">?falsy</span><span class="p">)})</span>
</pre></code>
</div>
<br/>


    
    <div id="prev-next">
    
    <a class="prev" href="/posts/cohost-mirror/2023-03-03-announcing-splint-0/"><svg class="icon icon-circle-left"><use xlink:href="/img/icons.svg#icon-circle-left"></use></svg><div class="nav-text">Announcing splint 0.1.69</div></a>
    
    
    <a class="next" href="/posts/cohost-mirror/2023-02-22-v-small-rant-about-v/"><div class="nav-text""></div><svg class="icon icon-circle-right"><use xlink:href="/img/icons.svg#icon-circle-right"></use></svg></a>
    
</div>

    

    


</div>

            <hr/>
            <div id="footercont">
                Copyright &copy; 2024 Noah Bogart
                <br>Powered by <a href="http://cryogenweb.org">Cryogen</a>
                <br>Theme by <a href="http://github.com/KingMob">KingMob</a>
            </div>
        </article>

        
        
    </body>
</html>
